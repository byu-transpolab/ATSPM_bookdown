# Methods

```{r setup, include = FALSE}
# load R libraries here; the `include` flag in the chunk options above tells
# whether to print the results or not. Usually you don't want to print the
# library statements, or any code on the pdf.

# Main Packages ========
# I use these in every doc
library(tidyverse)
library(knitr)
library(kableExtra)
library(modelsummary)

options(dplyr.summarise.inform = FALSE)

# Other packages ------
# These sometimes get used, and sometimes don't.
library(mlogit)

# Instructions and options =========
# prints missing data in tables as blank space
options(knitr.kable.NA = '') 
# tells kableExtra to not load latex table packages in the chunk output
options(kableExtra.latex.load_packages = FALSE) 

# round and format numbers that get printed in the text of the article.
inline_hook <- function(x) {
  if (is.numeric(x)) {
    format(x, digits = 3, big.mark = ",")
  } else x
}
knitr::knit_hooks$set(inline = inline_hook)

knitr::opts_chunk$set(echo = TRUE, cache = TRUE)

# options for latex-only output
if(knitr::is_latex_output()) {
  knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
} 

```

In this chapter, you describe the approach you have taken on the problem. This 
usually involves a discussion about both the data you used and the models you
applied.

## Data
UDOT provided ATSPM data for downtown Provo, Orem State Street, University Avenue,
 Orem 800 N, and Fort Union Boulevard in Cottonwood Heights during the years 
 2017-2020. It included various performance measure related data, such as Volume,
 Split Failures, Yellow and Red Actuations, Turning Movement Counts, Arrivals on 
 Red, and Approach Speed.To simplify the analysis, we only focused on Volume.

Signal and peak hour specific linear models were calculated and compared from
pre-COVID pandemic time periods to during the COVID pandemic time periods. Becuase of the 
drastic drop of volumes on March 12, 2020, this date was chosen as 
the threshold to start the "during COVID" dataset.The UDOT ATSPM data was available 
through December 31, 2020, so the period of March 12 to December 31 of each year 
was used for comparison. Linear models were created and graphed together using a facet grid to show and measure the percent change in volumes due to the COVID-19 pandemic.
The density of vehicles was greatest during the hours of 7AM to 9AM and 4PM to 6PM,
or the "AM Peak" and "PM Peak" respectively. Only these hours were used in the analysis.


```{r load_data}
Volume <- read_rds("data/Volume.rds")
```

Often there will be a table describing summary statistics of your dataset.
Table \@ref(tab:datasummary) shows a nice table using the [`datasummary`](https://vincentarelbundock.github.io/modelsummary/articles/datasummary.html) 
functions in the `modelsummary` package.

```{r datasummary}
datasummary_balance(
  ~type, 
  data = car_mlogit %>% 
    select(type, fuel, price, range, size), 
  dinm = FALSE,
  title = "Descriptive Statistics of Dataset"
  )
```

